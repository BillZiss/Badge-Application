@using Magenic.BadgeApplication.Resources
@using Magenic.BadgeApplication.Common.Interfaces
@model IApproveActivityCollection

@foreach (var activityForApproval in Model)
{
    <div class="row no-margin">
        <div class="col-md-12">
            <div class="row">
                <h3>
                    @activityForApproval.ActivityName
                </h3>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <a href="#" onclick="approveActivity(this, @activityForApproval.SubmissionId); return false;" class="btn btn-magenic">
                        @ApplicationResources.ApproveActivityLink
                    </a>
                    <a href="#" onclick="rejectActivity(this, @activityForApproval.SubmissionId); return false;" class="btn btn-warning">
                        @ApplicationResources.RejectActivityLink
                    </a>
                </div>
                <div class="col-md-5">
                    <b>
                        @activityForApproval.EmployeeFirstName @activityForApproval.EmployeeLastName
                    </b>
                    <br />
                    @activityForApproval.SubmissionNotes
                </div>
                <div class="col-md-3 col-md-offset-1 text-right">
                    <b>
                        @activityForApproval.SubmissionDate.ToString("MMMM dd, yyyy")
                    </b>
                </div>
            </div>
            <div class="row">
                &nbsp;
            </div>
            @if (activityForApproval.ApproveActivityBadgeCollection.Count() > 0)
            {
                <div class="row">
                    <div class="col-md-12">
                        @activityForApproval.ApproveActivityBadgeCollection.Sum(aabi => aabi.AwardValueAmount) Point(s) Awarded if Approved :
                        @foreach (var badge in activityForApproval.ApproveActivityBadgeCollection.OrderBy(aabi => aabi.BadgePriority))
                        {
                            <text>
                                @badge.Name - @badge.AwardValueAmount point(s)
                            </text>
                            if (badge != activityForApproval.ApproveActivityBadgeCollection.OrderBy(aabi => aabi.BadgePriority).Last())
                            {
                                <text>, </text>
                            }
                        }
                    </div>
                </div>
            }
            <div class="row">
                &nbsp;
            </div>
        </div>
    </div>
}
